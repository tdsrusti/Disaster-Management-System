<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Header</title>
    <link rel="stylesheet" href="../assets/css/header.css">
</head>
<body>
    <nav class="navbar">
        <div class="container navbar-content">
            <a href="#" class="logo">Safe<span>Haven</span></a>
            <ul class="nav-links">
                <li><a href="/" class="nav-link" data-page="home">Home</a></li>
                <li><a href="/map" class="nav-link" data-page="map">Find Resources</a></li>
                <li><a href="/sos" class="nav-link" data-page="sos">SOS</a></li>
                <li><a href="/call" class="nav-link" data-page="sos">Emergency ðŸ“ž</a></li>
                <li><a href="/donation" class="nav-link" data-page="donation">Donation</a></li>
                <li><a href="/volunteer" class="nav-link" data-page="volunteer">Volunteer</a></li>
                <li><a href="/profile" class="nav-link" data-page="profile">My Profile</a></li>
                
                <li><a href="#" id="auth-link">Logout</a></li>
            </ul>
        </div>
    </nav>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const authLink = document.getElementById("auth-link");

            function checkAuth() {
                const token = localStorage.getItem("token");
                if (token) {
                    authLink.textContent = "Logout";
                    authLink.href = "#";
                    authLink.addEventListener("click", function (e) {
                        e.preventDefault();
                        logout();
                    });
                } else {
                    authLink.textContent = "Login";
                    authLink.href = "/login";
                }
            }

            function logout() {
                localStorage.removeItem("token");
                window.location.href = "/login"; // Redirect to login page
            }

            document.addEventListener("tokenUpdated", checkAuth);

            checkAuth(); // Initial check on page load
        });
    </script>
</body>
</html>